#!/usr/bin/env node
import { render, useInput } from 'ink';
import meow from 'meow';
import meowhelp from 'cli-meow-help';
import meowrev, { meowparse } from 'meow-reverse';
import parse from 'shell-quote/parse.js';
import quote from 'shell-quote/quote.js';
import { createContext } from 'react';
import { useSequential } from 'react-seq';
import { useSequentialRouter } from 'array-router';
import main from "./main.mjs";
import { jsx as _jsx } from "react/jsx-runtime";
const name = `ink-ansi`;
const commands = {
  'show [FILE]': {
    desc: `Show an ANSI animation`
  },
  'loop [FILE]...': {
    desc: `Show files in a loop`
  },
  'list': {
    desc: `List ANSI files in current directory`
  }
};
const flags = {
  modemSpeed: {
    desc: `Emulate modem of specific baudrate`,
    alias: 'm',
    type: 'number',
    default: 56000
  },
  blinking: {
    desc: `Enable blinking text`,
    alias: 'b',
    type: 'boolean'
  },
  scrolling: {
    desc: `Enable scrolling`,
    alias: 's',
    type: 'boolean'
  },
  transparency: {
    desc: `Enable transparency`,
    alias: 't',
    type: 'boolean'
  }
};
const helpText = meowhelp({
  name: `ink-ansi`,
  flags,
  commands
});
const options = {
  importMeta: import.meta,
  flags
};
const {
  input: parts,
  flags: query
} = meow(helpText, options);
function parseURL(_, {
  pathname
}) {
  const argv = parse(pathname);
  const {
    input: parts,
    flags: query
  } = meowparse(argv, options);
  return {
    parts,
    query
  };
}
function createURL(_, {
  parts: input,
  query: flags
}) {
  const argv = meowrev({
    input,
    flags
  }, options);
  const pathname = quote(argv);
  return new URL(`argv:${pathname}`);
}
function applyURL(currentURL) {
  globalThis.location.href = currentURL.href;
}
globalThis.location = createURL(null, {
  parts,
  query
});
const SpecialContext = createContext();
function App() {
  useInput(input => {
    if (input.toLowerCase() === 'q') {
      process.exit(0);
    }
  });
  // use command-line URL
  const override = {
    createURL,
    parseURL,
    applyURL
  };
  const [parts, query, rMethods, {
    createContext,
    createBoundary
  }] = useSequentialRouter(override);
  return createContext(useSequential(sMethods => {
    const methods = {
      ...rMethods,
      ...sMethods
    };
    const {
      fallback,
      wrap,
      trap,
      reject
    } = methods;
    // default fallback (issue #142 in React-seq 0.9.0)
    fallback(null);
    // create error boundary
    wrap(children => createBoundary(children));
    // redirect error from boundary to generator function
    trap('error', err => reject(err));
    // method for managing route
    methods.manageRoute = () => [parts, query];
    return main(methods);
  }, [parts, query, rMethods, createBoundary]));
}
render( /*#__PURE__*/_jsx(App, {}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZW5kZXIiLCJ1c2VJbnB1dCIsIm1lb3ciLCJtZW93aGVscCIsIm1lb3dyZXYiLCJtZW93cGFyc2UiLCJwYXJzZSIsInF1b3RlIiwiY3JlYXRlQ29udGV4dCIsInVzZVNlcXVlbnRpYWwiLCJ1c2VTZXF1ZW50aWFsUm91dGVyIiwibWFpbiIsIm5hbWUiLCJjb21tYW5kcyIsImRlc2MiLCJmbGFncyIsIm1vZGVtU3BlZWQiLCJhbGlhcyIsInR5cGUiLCJkZWZhdWx0IiwiYmxpbmtpbmciLCJzY3JvbGxpbmciLCJ0cmFuc3BhcmVuY3kiLCJoZWxwVGV4dCIsIm9wdGlvbnMiLCJpbXBvcnRNZXRhIiwiaW1wb3J0IiwibWV0YSIsImlucHV0IiwicGFydHMiLCJxdWVyeSIsInBhcnNlVVJMIiwiXyIsInBhdGhuYW1lIiwiYXJndiIsImNyZWF0ZVVSTCIsIlVSTCIsImFwcGx5VVJMIiwiY3VycmVudFVSTCIsImdsb2JhbFRoaXMiLCJsb2NhdGlvbiIsImhyZWYiLCJTcGVjaWFsQ29udGV4dCIsIkFwcCIsInRvTG93ZXJDYXNlIiwicHJvY2VzcyIsImV4aXQiLCJvdmVycmlkZSIsInJNZXRob2RzIiwiY3JlYXRlQm91bmRhcnkiLCJzTWV0aG9kcyIsIm1ldGhvZHMiLCJmYWxsYmFjayIsIndyYXAiLCJ0cmFwIiwicmVqZWN0IiwiY2hpbGRyZW4iLCJlcnIiLCJtYW5hZ2VSb3V0ZSJdLCJzb3VyY2VzIjpbImNsaS5qc3giXSwic291cmNlc0NvbnRlbnQiOlsiIyEvdXNyL2Jpbi9lbnYgbm9kZVxuaW1wb3J0IHsgcmVuZGVyLCB1c2VJbnB1dCB9IGZyb20gJ2luayc7XG5pbXBvcnQgbWVvdyBmcm9tICdtZW93JztcbmltcG9ydCBtZW93aGVscCBmcm9tICdjbGktbWVvdy1oZWxwJztcbmltcG9ydCBtZW93cmV2LCB7IG1lb3dwYXJzZSB9IGZyb20gJ21lb3ctcmV2ZXJzZSc7XG5pbXBvcnQgcGFyc2UgZnJvbSAnc2hlbGwtcXVvdGUvcGFyc2UuanMnO1xuaW1wb3J0IHF1b3RlIGZyb20gJ3NoZWxsLXF1b3RlL3F1b3RlLmpzJztcbmltcG9ydCB7IGNyZWF0ZUNvbnRleHQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VTZXF1ZW50aWFsIH0gZnJvbSAncmVhY3Qtc2VxJztcbmltcG9ydCB7IHVzZVNlcXVlbnRpYWxSb3V0ZXIgfSBmcm9tICdhcnJheS1yb3V0ZXInO1xuaW1wb3J0IG1haW4gZnJvbSAnLi9tYWluLmpzeCc7XG5cbmNvbnN0IG5hbWUgPSBgaW5rLWFuc2lgO1xuY29uc3QgY29tbWFuZHMgPSB7XG4gICdzaG93IFtGSUxFXSc6IHsgZGVzYzogYFNob3cgYW4gQU5TSSBhbmltYXRpb25gIH0sXG4gICdsb29wIFtGSUxFXS4uLic6IHsgZGVzYzogYFNob3cgZmlsZXMgaW4gYSBsb29wYCB9LFxuXHQnbGlzdCc6IHsgZGVzYzogYExpc3QgQU5TSSBmaWxlcyBpbiBjdXJyZW50IGRpcmVjdG9yeWAgfSxcbn07XG5jb25zdCBmbGFncyA9IHtcbiAgbW9kZW1TcGVlZDoge1xuICAgIGRlc2M6IGBFbXVsYXRlIG1vZGVtIG9mIHNwZWNpZmljIGJhdWRyYXRlYCxcbiAgICBhbGlhczogJ20nLFxuICAgIHR5cGU6ICdudW1iZXInLFxuICAgIGRlZmF1bHQ6IDU2MDAwXG4gIH0sXG4gIGJsaW5raW5nOiB7XG4gICAgZGVzYzogYEVuYWJsZSBibGlua2luZyB0ZXh0YCxcbiAgICBhbGlhczogJ2InLFxuICAgIHR5cGU6ICdib29sZWFuJyxcbiAgfSxcbiAgc2Nyb2xsaW5nOiB7XG4gICAgZGVzYzogYEVuYWJsZSBzY3JvbGxpbmdgLFxuICAgIGFsaWFzOiAncycsXG4gICAgdHlwZTogJ2Jvb2xlYW4nLFxuICB9LFxuICB0cmFuc3BhcmVuY3k6IHtcbiAgICBkZXNjOiBgRW5hYmxlIHRyYW5zcGFyZW5jeWAsXG4gICAgYWxpYXM6ICd0JyxcbiAgICB0eXBlOiAnYm9vbGVhbicsXG4gIH0sXG59O1xuXG5jb25zdCBoZWxwVGV4dCA9IG1lb3doZWxwKHtcdG5hbWU6IGBpbmstYW5zaWAsXHRmbGFncywgY29tbWFuZHMgfSk7XG5jb25zdCBvcHRpb25zID0geyBpbXBvcnRNZXRhOiBpbXBvcnQubWV0YSwgZmxhZ3MgfTtcbmNvbnN0IHsgaW5wdXQ6IHBhcnRzLCBmbGFnczogcXVlcnkgfSA9IG1lb3coaGVscFRleHQsIG9wdGlvbnMpO1xuXG5mdW5jdGlvbiBwYXJzZVVSTChfLCB7IHBhdGhuYW1lIH0pIHtcbiAgY29uc3QgYXJndiA9IHBhcnNlKHBhdGhuYW1lKTtcbiAgY29uc3QgeyBpbnB1dDogcGFydHMsIGZsYWdzOiBxdWVyeSB9ID0gbWVvd3BhcnNlKGFyZ3YsIG9wdGlvbnMpO1xuICByZXR1cm4geyBwYXJ0cywgcXVlcnkgfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVVJMKF8sIHsgcGFydHM6IGlucHV0LCBxdWVyeTogZmxhZ3MgfSkge1xuICBjb25zdCBhcmd2ID0gbWVvd3Jldih7IGlucHV0LCBmbGFncyB9LCBvcHRpb25zKTtcbiAgY29uc3QgcGF0aG5hbWUgPSBxdW90ZShhcmd2KTtcbiAgcmV0dXJuIG5ldyBVUkwoYGFyZ3Y6JHtwYXRobmFtZX1gKTtcbn1cblxuZnVuY3Rpb24gYXBwbHlVUkwoY3VycmVudFVSTCkge1xuICBnbG9iYWxUaGlzLmxvY2F0aW9uLmhyZWYgPSBjdXJyZW50VVJMLmhyZWY7XG59XG5cbmdsb2JhbFRoaXMubG9jYXRpb24gPSBjcmVhdGVVUkwobnVsbCwgeyBwYXJ0cywgcXVlcnkgfSk7XG5cbmNvbnN0IFNwZWNpYWxDb250ZXh0ID0gY3JlYXRlQ29udGV4dCgpO1xuXG5mdW5jdGlvbiBBcHAoKSB7XG4gIHVzZUlucHV0KChpbnB1dCkgPT4ge1xuICAgIGlmIChpbnB1dC50b0xvd2VyQ2FzZSgpID09PSAncScpIHtcbiAgICAgIHByb2Nlc3MuZXhpdCgwKTtcbiAgICB9XG4gIH0pXG4gIC8vIHVzZSBjb21tYW5kLWxpbmUgVVJMXG4gIGNvbnN0IG92ZXJyaWRlID0geyBjcmVhdGVVUkwsIHBhcnNlVVJMLCBhcHBseVVSTCB9O1xuICBjb25zdCBbIHBhcnRzLCBxdWVyeSwgck1ldGhvZHMsIHsgY3JlYXRlQ29udGV4dCwgY3JlYXRlQm91bmRhcnkgfSBdID0gdXNlU2VxdWVudGlhbFJvdXRlcihvdmVycmlkZSk7XG4gIHJldHVybiBjcmVhdGVDb250ZXh0KHVzZVNlcXVlbnRpYWwoKHNNZXRob2RzKSA9PiB7XG4gICAgY29uc3QgbWV0aG9kcyA9IHsgLi4uck1ldGhvZHMsIC4uLnNNZXRob2RzIH07XG4gICAgY29uc3QgeyBmYWxsYmFjaywgd3JhcCwgdHJhcCwgcmVqZWN0IH0gPSBtZXRob2RzO1xuICAgIC8vIGRlZmF1bHQgZmFsbGJhY2sgKGlzc3VlICMxNDIgaW4gUmVhY3Qtc2VxIDAuOS4wKVxuICAgIGZhbGxiYWNrKG51bGwpO1xuICAgIC8vIGNyZWF0ZSBlcnJvciBib3VuZGFyeVxuICAgIHdyYXAoY2hpbGRyZW4gPT4gY3JlYXRlQm91bmRhcnkoY2hpbGRyZW4pKTtcbiAgICAvLyByZWRpcmVjdCBlcnJvciBmcm9tIGJvdW5kYXJ5IHRvIGdlbmVyYXRvciBmdW5jdGlvblxuICAgIHRyYXAoJ2Vycm9yJywgZXJyID0+IHJlamVjdChlcnIpKTtcbiAgICAvLyBtZXRob2QgZm9yIG1hbmFnaW5nIHJvdXRlXG4gICAgbWV0aG9kcy5tYW5hZ2VSb3V0ZSA9ICgpID0+IFsgcGFydHMsIHF1ZXJ5IF07XG4gICAgcmV0dXJuIG1haW4obWV0aG9kcyk7XG4gIH0sIFsgcGFydHMsIHF1ZXJ5LCByTWV0aG9kcywgY3JlYXRlQm91bmRhcnkgXSkpO1xufVxuXG5yZW5kZXIoPEFwcCAvPik7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0EsU0FBU0EsTUFBTSxFQUFFQyxRQUFRLFFBQVEsS0FBSztBQUN0QyxPQUFPQyxJQUFJLE1BQU0sTUFBTTtBQUN2QixPQUFPQyxRQUFRLE1BQU0sZUFBZTtBQUNwQyxPQUFPQyxPQUFPLElBQUlDLFNBQVMsUUFBUSxjQUFjO0FBQ2pELE9BQU9DLEtBQUssTUFBTSxzQkFBc0I7QUFDeEMsT0FBT0MsS0FB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