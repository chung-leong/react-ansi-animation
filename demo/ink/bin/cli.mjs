#!/usr/bin/env node
import { render, useInput } from 'ink';
import meow from 'meow';
import meowhelp from 'cli-meow-help';
import meowrev, { meowparse } from 'meow-reverse';
import parse from 'shell-quote/parse.js';
import quote from 'shell-quote/quote.js';
import { createContext } from 'react';
import { useSequential } from 'react-seq';
import { useSequentialRouter } from './array-router/index.js';
import main from "./main.mjs";
import { jsx as _jsx } from "react/jsx-runtime";
const name = `ink-ansi`;
const commands = {
  'show [FILE]': {
    desc: `Show an ANSI animation`
  },
  'loop [FILE]...': {
    desc: `Show files in a loop`
  },
  'list': {
    desc: `List ANSI files in current directory`
  }
};
const flags = {
  modemSpeed: {
    desc: `Emulate modem of specific baudrate`,
    alias: 'm',
    type: 'number',
    default: 56000
  },
  blinking: {
    desc: `Enable blinking text`,
    alias: 'b',
    type: 'boolean'
  },
  scrolling: {
    desc: `Enable scrolling`,
    alias: 's',
    type: 'boolean'
  },
  transparency: {
    desc: `Enable transparency`,
    alias: 't',
    type: 'boolean'
  }
};
const helpText = meowhelp({
  name: `ink-ansi`,
  flags,
  commands
});
const options = {
  importMeta: import.meta,
  flags
};
const {
  input: parts,
  flags: query
} = meow(helpText, options);
function parseURL(_, {
  pathname
}) {
  const argv = parse(pathname);
  const {
    input: parts,
    flags: query
  } = meowparse(argv, options);
  return {
    parts,
    query
  };
}
function createURL(_, {
  parts: input,
  query: flags
}) {
  const argv = meowrev({
    input,
    flags
  }, options);
  const pathname = quote(argv);
  return new URL(`argv:${pathname}`);
}
function applyURL(currentURL) {
  globalThis.location.href = currentURL.href;
}
globalThis.location = createURL(null, {
  parts,
  query
});
const SpecialContext = createContext();
function App() {
  useInput(input => {
    if (input.toLowerCase() === 'q') {
      process.exit(0);
    }
  });
  // use command-line URL
  const override = {
    createURL,
    parseURL,
    applyURL
  };
  const [parts, query, rMethods, {
    createContext,
    createBoundary
  }] = useSequentialRouter(override);
  return createContext(useSequential(sMethods => {
    const methods = {
      ...rMethods,
      ...sMethods
    };
    const {
      fallback,
      wrap,
      trap,
      reject
    } = methods;
    // default fallback (issue #142 in React-seq 0.9.0)
    fallback(null);
    // create error boundary
    wrap(children => createBoundary(children));
    // redirect error from boundary to generator function
    trap('error', err => reject(err));
    // method for managing route
    methods.manageRoute = () => [parts, query];
    return main(methods);
  }, [parts, query, rMethods, createBoundary]));
}
render( /*#__PURE__*/_jsx(App, {}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZW5kZXIiLCJ1c2VJbnB1dCIsIm1lb3ciLCJtZW93aGVscCIsIm1lb3dyZXYiLCJtZW93cGFyc2UiLCJwYXJzZSIsInF1b3RlIiwiY3JlYXRlQ29udGV4dCIsInVzZVNlcXVlbnRpYWwiLCJ1c2VTZXF1ZW50aWFsUm91dGVyIiwibWFpbiIsIm5hbWUiLCJjb21tYW5kcyIsImRlc2MiLCJmbGFncyIsIm1vZGVtU3BlZWQiLCJhbGlhcyIsInR5cGUiLCJkZWZhdWx0IiwiYmxpbmtpbmciLCJzY3JvbGxpbmciLCJ0cmFuc3BhcmVuY3kiLCJoZWxwVGV4dCIsIm9wdGlvbnMiLCJpbXBvcnRNZXRhIiwiaW1wb3J0IiwibWV0YSIsImlucHV0IiwicGFydHMiLCJxdWVyeSIsInBhcnNlVVJMIiwiXyIsInBhdGhuYW1lIiwiYXJndiIsImNyZWF0ZVVSTCIsIlVSTCIsImFwcGx5VVJMIiwiY3VycmVudFVSTCIsImdsb2JhbFRoaXMiLCJsb2NhdGlvbiIsImhyZWYiLCJTcGVjaWFsQ29udGV4dCIsIkFwcCIsInRvTG93ZXJDYXNlIiwicHJvY2VzcyIsImV4aXQiLCJvdmVycmlkZSIsInJNZXRob2RzIiwiY3JlYXRlQm91bmRhcnkiLCJzTWV0aG9kcyIsIm1ldGhvZHMiLCJmYWxsYmFjayIsIndyYXAiLCJ0cmFwIiwicmVqZWN0IiwiY2hpbGRyZW4iLCJlcnIiLCJtYW5hZ2VSb3V0ZSJdLCJzb3VyY2VzIjpbImNsaS5qc3giXSwic291cmNlc0NvbnRlbnQiOlsiIyEvdXNyL2Jpbi9lbnYgbm9kZVxuaW1wb3J0IHsgcmVuZGVyLCB1c2VJbnB1dCB9IGZyb20gJ2luayc7XG5pbXBvcnQgbWVvdyBmcm9tICdtZW93JztcbmltcG9ydCBtZW93aGVscCBmcm9tICdjbGktbWVvdy1oZWxwJztcbmltcG9ydCBtZW93cmV2LCB7IG1lb3dwYXJzZSB9IGZyb20gJ21lb3ctcmV2ZXJzZSc7XG5pbXBvcnQgcGFyc2UgZnJvbSAnc2hlbGwtcXVvdGUvcGFyc2UuanMnO1xuaW1wb3J0IHF1b3RlIGZyb20gJ3NoZWxsLXF1b3RlL3F1b3RlLmpzJztcbmltcG9ydCB7IGNyZWF0ZUNvbnRleHQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VTZXF1ZW50aWFsIH0gZnJvbSAncmVhY3Qtc2VxJztcbmltcG9ydCB7IHVzZVNlcXVlbnRpYWxSb3V0ZXIgfSBmcm9tICcuL2FycmF5LXJvdXRlci9pbmRleC5qcyc7XG5pbXBvcnQgbWFpbiBmcm9tICcuL21haW4uanN4JztcblxuY29uc3QgbmFtZSA9IGBpbmstYW5zaWA7XG5jb25zdCBjb21tYW5kcyA9IHtcbiAgJ3Nob3cgW0ZJTEVdJzogeyBkZXNjOiBgU2hvdyBhbiBBTlNJIGFuaW1hdGlvbmAgfSxcbiAgJ2xvb3AgW0ZJTEVdLi4uJzogeyBkZXNjOiBgU2hvdyBmaWxlcyBpbiBhIGxvb3BgIH0sXG5cdCdsaXN0JzogeyBkZXNjOiBgTGlzdCBBTlNJIGZpbGVzIGluIGN1cnJlbnQgZGlyZWN0b3J5YCB9LFxufTtcbmNvbnN0IGZsYWdzID0ge1xuICBtb2RlbVNwZWVkOiB7XG4gICAgZGVzYzogYEVtdWxhdGUgbW9kZW0gb2Ygc3BlY2lmaWMgYmF1ZHJhdGVgLFxuICAgIGFsaWFzOiAnbScsXG4gICAgdHlwZTogJ251bWJlcicsXG4gICAgZGVmYXVsdDogNTYwMDBcbiAgfSxcbiAgYmxpbmtpbmc6IHtcbiAgICBkZXNjOiBgRW5hYmxlIGJsaW5raW5nIHRleHRgLFxuICAgIGFsaWFzOiAnYicsXG4gICAgdHlwZTogJ2Jvb2xlYW4nLFxuICB9LFxuICBzY3JvbGxpbmc6IHtcbiAgICBkZXNjOiBgRW5hYmxlIHNjcm9sbGluZ2AsXG4gICAgYWxpYXM6ICdzJyxcbiAgICB0eXBlOiAnYm9vbGVhbicsXG4gIH0sXG4gIHRyYW5zcGFyZW5jeToge1xuICAgIGRlc2M6IGBFbmFibGUgdHJhbnNwYXJlbmN5YCxcbiAgICBhbGlhczogJ3QnLFxuICAgIHR5cGU6ICdib29sZWFuJyxcbiAgfSxcbn07XG5cbmNvbnN0IGhlbHBUZXh0ID0gbWVvd2hlbHAoe1x0bmFtZTogYGluay1hbnNpYCxcdGZsYWdzLCBjb21tYW5kcyB9KTtcbmNvbnN0IG9wdGlvbnMgPSB7IGltcG9ydE1ldGE6IGltcG9ydC5tZXRhLCBmbGFncyB9O1xuY29uc3QgeyBpbnB1dDogcGFydHMsIGZsYWdzOiBxdWVyeSB9ID0gbWVvdyhoZWxwVGV4dCwgb3B0aW9ucyk7XG5cbmZ1bmN0aW9uIHBhcnNlVVJMKF8sIHsgcGF0aG5hbWUgfSkge1xuICBjb25zdCBhcmd2ID0gcGFyc2UocGF0aG5hbWUpO1xuICBjb25zdCB7IGlucHV0OiBwYXJ0cywgZmxhZ3M6IHF1ZXJ5IH0gPSBtZW93cGFyc2UoYXJndiwgb3B0aW9ucyk7XG4gIHJldHVybiB7IHBhcnRzLCBxdWVyeSB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVVUkwoXywgeyBwYXJ0czogaW5wdXQsIHF1ZXJ5OiBmbGFncyB9KSB7XG4gIGNvbnN0IGFyZ3YgPSBtZW93cmV2KHsgaW5wdXQsIGZsYWdzIH0sIG9wdGlvbnMpO1xuICBjb25zdCBwYXRobmFtZSA9IHF1b3RlKGFyZ3YpO1xuICByZXR1cm4gbmV3IFVSTChgYXJndjoke3BhdGhuYW1lfWApO1xufVxuXG5mdW5jdGlvbiBhcHBseVVSTChjdXJyZW50VVJMKSB7XG4gIGdsb2JhbFRoaXMubG9jYXRpb24uaHJlZiA9IGN1cnJlbnRVUkwuaHJlZjtcbn1cblxuZ2xvYmFsVGhpcy5sb2NhdGlvbiA9IGNyZWF0ZVVSTChudWxsLCB7IHBhcnRzLCBxdWVyeSB9KTtcblxuY29uc3QgU3BlY2lhbENvbnRleHQgPSBjcmVhdGVDb250ZXh0KCk7XG5cbmZ1bmN0aW9uIEFwcCgpIHtcbiAgdXNlSW5wdXQoKGlucHV0KSA9PiB7XG4gICAgaWYgKGlucHV0LnRvTG93ZXJDYXNlKCkgPT09ICdxJykge1xuICAgICAgcHJvY2Vzcy5leGl0KDApO1xuICAgIH1cbiAgfSlcbiAgLy8gdXNlIGNvbW1hbmQtbGluZSBVUkxcbiAgY29uc3Qgb3ZlcnJpZGUgPSB7IGNyZWF0ZVVSTCwgcGFyc2VVUkwsIGFwcGx5VVJMIH07XG4gIGNvbnN0IFsgcGFydHMsIHF1ZXJ5LCByTWV0aG9kcywgeyBjcmVhdGVDb250ZXh0LCBjcmVhdGVCb3VuZGFyeSB9IF0gPSB1c2VTZXF1ZW50aWFsUm91dGVyKG92ZXJyaWRlKTtcbiAgcmV0dXJuIGNyZWF0ZUNvbnRleHQodXNlU2VxdWVudGlhbCgoc01ldGhvZHMpID0+IHtcbiAgICBjb25zdCBtZXRob2RzID0geyAuLi5yTWV0aG9kcywgLi4uc01ldGhvZHMgfTtcbiAgICBjb25zdCB7IGZhbGxiYWNrLCB3cmFwLCB0cmFwLCByZWplY3QgfSA9IG1ldGhvZHM7XG4gICAgLy8gZGVmYXVsdCBmYWxsYmFjayAoaXNzdWUgIzE0MiBpbiBSZWFjdC1zZXEgMC45LjApXG4gICAgZmFsbGJhY2sobnVsbCk7XG4gICAgLy8gY3JlYXRlIGVycm9yIGJvdW5kYXJ5XG4gICAgd3JhcChjaGlsZHJlbiA9PiBjcmVhdGVCb3VuZGFyeShjaGlsZHJlbikpO1xuICAgIC8vIHJlZGlyZWN0IGVycm9yIGZyb20gYm91bmRhcnkgdG8gZ2VuZXJhdG9yIGZ1bmN0aW9uXG4gICAgdHJhcCgnZXJyb3InLCBlcnIgPT4gcmVqZWN0KGVycikpO1xuICAgIC8vIG1ldGhvZCBmb3IgbWFuYWdpbmcgcm91dGVcbiAgICBtZXRob2RzLm1hbmFnZVJvdXRlID0gKCkgPT4gWyBwYXJ0cywgcXVlcnkgXTtcbiAgICByZXR1cm4gbWFpbihtZXRob2RzKTtcbiAgfSwgWyBwYXJ0cywgcXVlcnksIHJNZXRob2RzLCBjcmVhdGVCb3VuZGFyeSBdKSk7XG59XG5cbnJlbmRlcig8QXBwIC8+KTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQSxTQUFTQSxNQUFNLEVBQUVDLFFBQVEsUUFBUSxLQUFLO0FBQ3RDLE9BQU9DLElBQUksTUFBTSxNQUFNO0FBQ3ZCLE9BQU9DLFFBQVEsTUFBTSxlQUFlO0FBQ3BDLE9BQU9DLE9BQU8sSUFBSUMsU0FBUyxRQUFRLGNBQWM7QUFDakQsT0FBT0MsS0FBSyxNQUFNLHNCQUFzQjtBQUN4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